<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AI Чат — StudySphere</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ai_chat.css') }}">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container header-inner">
      <div class="logo">
        <a href="{{ url_for('main.landing') }}">
          <img src="{{ url_for('static', filename='images/logo.svg') }}" alt="StudySphere">
        </a>
        <span class="logo-text">StudySphere</span>
      </div>
      <nav class="nav">
        <a href="{{ url_for('ai_chat_bp.ai_chat') }}" class="active">Чат с ИИ</a>
        <a href="{{ url_for('main.textbook') }}">Учебник</a>
        <a href="{{ url_for('main.show_tasks') }}">Задачи</a>
        <a href="{{ url_for('quizzes_bp.choose') }}">Квизы</a>
        <a href="{{ url_for('main.support') }}">Поддержка</a>
      </nav>
      <div class="auth-buttons">
        <a href="{{ url_for('main.register') }}" class="btn-auth">Регистрация</a>
        <a href="{{ url_for('main.login') }}" class="btn-auth">Вход</a>
      </div>
      <button class="burger" id="burger"><span></span><span></span><span></span></button>
    </div>
  </header>

  <!-- Chat Page -->
  <main class="chat-page container">
    <div class="chat-container">

      <!-- Sidebar: Avatar + Controls + Settings -->
      <aside class="chat-sidebar">
        <div class="avatar-card">
          <img id="avatar" src="{{ url_for('static', filename='images/Basic_Avatar.svg') }}" alt="Avatar">
        </div>
        <div class="controls-container">
          <!-- Тип генерации -->
          <label>
            Генерация:
            <select id="generationType" class="mode-btn">
              <option value="text" selected>Текст</option>
              <option value="image">Изображения</option>
            </select>
          </label>
          <!-- Текстовые провайдеры -->
          <label class="text-only">
            Провайдер:
            <select id="modelType" class="model-btn">
              <option value="PollinationsAI" title="Быстрый помощник с идеальным балансом скорости и качества.">PollinationsAI</option>
              <option value="Qwen_Qwen_2_5M" title="Эксперт с высочайшей точностью для научных и сложных вопросов.">Qwen_Qwen_2_5M</option>
              <option value="Websim" title="Мастер структурирования с хорошо организованными ответами.">Websim</option>
              <option value="Free2GPT" title="Детализированный генератор объёмных и подробных ответов.">Free2GPT</option>
              <option value="Qwen_Qwen_2_5" title="Аналитик с безупречной структурой и полнотой изложения.">Qwen_Qwen_2_5</option>
              <option value="ChatGLM" title="Перфекционист качества для случаев, когда точность важнее скорости.">ChatGLM</option>
              <option value="GizAI" title="Многословный рассказчик с обширными, но менее точными ответами.">GizAI</option>
              <option value="Qwen_Qwen_2_72B" title="Шустрый помощник для базовых вопросов и простых запросов.">Qwen_Qwen_2_72B</option>
              <option value="AnyProvider" title="Надёжный резервист с хорошей структурой, но медленной работой.">AnyProvider</option>
              <option value="FreeGpt" title="Полиглот с уклоном в китайский, требующий инструкций по языку ответа.">FreeGpt</option>
            </select>
          </label>
          <!-- Картинные провайдеры -->
          <label class="image-only" style="display:none">
            Картинки:
            <select id="imageModelType" class="model-btn">
              <option value="PollinationsImage" title="Молниеносный художник для быстрого создания визуального контента.">PollinationsImage</option>
              <option value="ImageLabs" title="Универсальный визуализатор с хорошей производительностью.">ImageLabs</option>
              <option value="BlackForestLabs_Flux1Dev" title="Детализированный иллюстратор для запасных случаев.">BlackForestLabs_Flux1Dev</option>
            </select>
          </label>
          <!-- Настройки -->
          <button id="settingsToggle" class="settings-btn">⚙️ Настройки</button>
          <div id="settingsPanel" class="settings-panel" style="display:none">
            <fieldset>
              <legend>Тема интерфейса</legend>
              <label><input type="radio" name="theme" value="light" checked> Светлая</label>
              <label><input type="radio" name="theme" value="dark"> Тёмная</label>
            </fieldset>
            <fieldset>
              <legend>Уровень формальности</legend>
              <label><input type="radio" name="tone" value="friendly" checked> Дружелюбный</label>
              <label><input type="radio" name="tone" value="neutral"> Нейтральный</label>
              <label><input type="radio" name="tone" value="formal"> Официальный</label>
            </fieldset>
            <fieldset>
              <legend>Макс. длина ответа</legend>
              <select id="maxLength">
                <option value="300">Короткий (≤300 слов)</option>
                <option value="500" selected>Средний (≤500 слов)</option>
                <option value="1000">Подробный (≤1000 слов)</option>
                <option value="2000">Очень подробный (≤2000 слов)</option>
              </select>
            </fieldset>
            <fieldset>
              <legend>Креативность</legend>
              <input type="range" id="temperature" min="0" max="1" step="0.01" value="0.5">
            </fieldset>
            <fieldset>
              <label><input type="checkbox" id="autosave"> Автосохранение чата</label>
            </fieldset>
            <fieldset>
              <label><input type="checkbox" id="showTimestamps"> Показывать время сообщений</label>
            </fieldset>
            <fieldset>
              <legend>Язык общения</legend>
              <select id="language">
                <option value="ru" selected>Русский</option>
                <option value="en">English</option>
              </select>
            </fieldset>
          </div>
        </div>
      </aside>

      <!-- Main Chat Area -->
      <section class="chat-main">
        <h2 class="chat-title">Чат с AI-ассистентом</h2>
        <div id="chatMessages" class="chat-messages"></div>
        <div class="input-area">
          <textarea id="messageInput" class="message-input" placeholder="Введите сообщение…"></textarea>
          <button id="sendBtn" class="send-btn">Отправить</button>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <a href="{{ url_for('main.landing') }}" class="logo">
          <img src="{{ url_for('static', filename='images/logo.svg') }}" alt="StudySphere" class="footer-logo">
          <span class="logo-text">StudySphere</span>
        </a>
        <p class="copy">© 2025 StudySphere. Все права защищены.</p>
      </div>
      <div class="footer-right">
        <a href="https://github.com/dany-simonov/SS" target="_blank">GitHub</a>
      </div>
    </div>
  </footer>

  <script src="{{ url_for('static', filename='js/ai_chat.js') }}"></script>
</body>
</html>